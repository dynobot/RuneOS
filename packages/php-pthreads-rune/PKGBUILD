# Maintainer: Simone De Gregori <orion@runeaudio.com>
# Development: https://github.com/krakjoe/pthreads
 
pkgname=php-pthreads-rune
#pkgver=3.1.6
pkgver=3.2.0
pkgrel=1
pkgdesc="Object Orientated API that allows user-land multi-threading in PHP"
arch=('i686' 'x86_64' 'armv6h' 'armv7h' 'aarch64')
url="https://github.com/krakjoe/pthreads"
license=('PHP')
depends=('php-rune')
_ininame="pthreads.ini"
_inifile="etc/php/conf.d/$_ininame"
backup=("$_inifile")
_filename="redis-$pkgver.tgz"
source=(git://github.com/krakjoe/pthreads.git#branch=PHP5)
md5sums=('SKIP')
_builddir=pthreads
 
build() {
    cd $_builddir
 
    phpize
    ./configure --prefix=/usr --enable-pthreads
    make -j4
    #make test
}
 
package() {
    cd $_builddir
 
    make -j4 INSTALL_ROOT="$pkgdir" install
    echo "extension=pthreads.so" > "$_ininame"
    install -vDm644 "$_ininame" "$pkgdir/$_inifile"
}

